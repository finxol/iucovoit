version: '3'

services:
    mongo:
        image: mongo:5
        restart: always
        volumes:
            - './mongodb:/data/db'
        env_file:
            - '.mongo.env'
        networks:
            - unicovoit

    unicovoit:
        image: registry.ozna.me/unicovoit:latest
        container_name: unicovoit
        restart: always
        ports:
            - "3000:3000"
        volumes:
            -   './static/img:/usr/src/unicovoit/static/img'
        env_file:
            - .env
        environment:
            - MONGO_URL=mongodb
            - ADDOK_DOMAIN=api.covoit.ozna.me
        networks:
            - unicovoit
        depends_on:
            - mongodb

networks:
    unicovoit:
        driver: bridge
